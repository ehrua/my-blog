<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>판태현 블로그</title>

<style>
body {
  margin: 0;
  background: black;
  color: #e0e0e0;
  font-family: serif;
  overflow: hidden;
}

.container {
  max-width: 640px;
  margin: 100px auto;
  padding: 20px;
  position: relative;
  z-index: 10;
}

button {
  margin-top: 25px;
  padding: 10px 18px;
  background: black;
  color: red;
  border: 1px solid red;
  cursor: pointer;
}
button:hover { background: darkred; }

/* 하단 바 */
#bottomBar {
  position: fixed;
  bottom: 10px;
  width: 100%;
  display: flex;
  justify-content: center;
  gap: 50px;
  z-index: 20;
}
.icon {
  font-size: 26px;
  color: white;
  cursor: pointer;
}

/* 공유 버튼 (오른쪽) */
#shareBtn {
  position: fixed;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  writing-mode: vertical-rl;
  color: white;
  border: 1px solid #555;
  padding: 6px 4px;
  font-size: 16px;
  cursor: pointer;
  z-index: 30;
  background: rgba(0,0,0,0.6);
}
#shareBtn:hover {
  background: darkred;
}

/* 광고 (사이드 전용) */
.ad {
  position: fixed;
  width: 160px;
  z-index: 5;
  cursor: pointer;
}
#adLeft {
  left: 10px;
  top: 30%;
}
#adRight {
  right: 60px;
  top: 35%;
}

/* 오류 박스 */
.error-box {
  position: fixed;
  background: rgba(0,0,0,0.9);
  border: 1px solid red;
  color: red;
  padding: 10px;
  z-index: 40;
}
.close {
  position: absolute;
  top: 3px;
  right: 6px;
  cursor: pointer;
  color: white;
}

/* 귀신 */
.ghost {
  position: fixed;
  width: 200px;
  height: 200px;
  background: url("./img/ghost1.png") center/cover no-repeat;
  z-index: 999;
  animation: shake 0.15s infinite;
}

@keyframes shake {
  0% { transform: translate(0,0); }
  25% { transform: translate(3px,-3px); }
  50% { transform: translate(-3px,3px); }
  75% { transform: translate(3px,3px); }
  100% { transform: translate(0,0); }
}
</style>
</head>

<body>

<!-- 오디오 -->
<audio id="bgm" src="./sound/bgm.mp3" loop></audio>
<audio id="scream" src="./sound/scream.mp3"></audio>
<audio id="deathSound" src="./sound/screm2.mp3"></audio>

<!-- 공유 버튼 -->
<div id="shareBtn" onclick="intentionalDie()">공유</div>

<!-- 광고 (사이드 고정) -->
<img id="adLeft" class="ad" src="./img/advertisement1.png" onclick="intentionalDie()" style="display:none;">
<img id="adRight" class="ad" src="./img/advertisement1.png" onclick="intentionalDie()" style="display:none;">

<div class="container" id="content">
  <h1>판태현 블로그</h1>
  <div id="ruleText"></div>
  <button id="nextBtn">다음 항목으로 이동</button>
</div>

<div id="bottomBar">
  <div class="icon" onclick="warnButton()">◀</div>
  <div class="icon" onclick="warnButton()">⌂</div>
</div>

<script>
const rules = [
 "1. 이 글을 읽는 동안 뒤로 가기 버튼을 누르지 마십시오.",
 "2. 이 블로그에 접속한 사실과 링크를 외부에 남기지 마십시오.",
 "3. 화면에 비친 자신의 얼굴을 5초 이상 바라보지 마십시오.",
 "4. 오류나 빈 화면이 나타나도 새로 고침을 하지 마십시오.",
 "5. 화면이 빨간색으로 변하면 오른쪽으로 고개를 돌리십시오.",
 "6. 거짓된 문장이 있을 수 있습니다.",
 "7. 저주에서 벗어나고 싶다면 3명에게 링크를 공유하십시오.",
 "8. 응시하라는 문장은 존재하지 않습니다.",
 "9. 광고가 나타나도 누르지 마십시오.",
 "10. 어떤 소리에도 반응하지 마십시오."
];

let index = 0;
let dead = false;
let warned = false;

const ruleText = document.getElementById("ruleText");
const nextBtn = document.getElementById("nextBtn");

// BGM
document.body.addEventListener("click", () => {
  document.getElementById("bgm").play();
}, { once: true });

showRule();

nextBtn.onclick = () => {
  if (dead) return;
  index++;
  if (index >= rules.length) {
    escape();
    return;
  }
  showRule();
};

function showRule() {
  ruleText.innerText = rules[index];

  if (index === 3) spawnErrors();
  if (index === 9) document.getElementById("scream").play();

  // 광고는 낮은 확률 + 사이드만
  if (Math.random() < 0.25) {
    document.getElementById("adLeft").style.display = "block";
    document.getElementById("adRight").style.display = "block";
  }
}

function spawnErrors() {
  for (let i = 0; i < 20; i++) {
    const e = document.createElement("div");
    e.className = "error-box";
    e.style.top = Math.random()*90+"%";
    e.style.left = Math.random()*90+"%";
    e.innerHTML = `오류<br>CODE 56424650<span class="close">✕</span>`;
    e.querySelector(".close").onclick = ()=>e.remove();
    document.body.appendChild(e);
  }
}

function warnButton() {
  if (!warned) {
    warned = true;
    alert("이 버튼은 규칙에 위배됩니다.");
  } else {
    intentionalDie();
  }
}

function intentionalDie() {
  if (dead) return;
  dead = true;

  document.getElementById("content").innerHTML =
    "<h1>규칙을 어겼습니다</h1><p>당신은 사망하셨습니다.</p>";

  setTimeout(()=>{
    document.getElementById("deathSound").play();
    for(let i=0;i<30;i++){
      setTimeout(()=>{
        const g=document.createElement("div");
        g.className="ghost";
        g.style.top=Math.random()*100+"%";
        g.style.left=Math.random()*100+"%";
        document.body.appendChild(g);
      },i*80);
    }
  },2000);
}

function escape() {
  document.getElementById("content").innerHTML =
    "<h1>저주에서 벗어났습니다</h1><p>당신은 끝까지 규칙을 지켰습니다.</p>";

  setTimeout(()=>{
    let blink = setInterval(()=>{
      document.body.style.background =
        document.body.style.background === "black" ? "darkred" : "black";
    },200);
    setTimeout(()=>clearInterval(blink),2000);
  },5000);
}

// 랜덤 빨간 화면 (연출만)
setInterval(()=>{
  if(!dead && Math.random()<0.3){
    document.body.style.background="darkred";
    setTimeout(()=>document.body.style.background="black",300);
  }
},1500);
</script>

</body>
</html>
